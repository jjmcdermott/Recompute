<!DOCTYPE html>
<head>
    <title>Recompute</title>

    <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
    <script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
</head>
<body>

<h1>Recompute</h1>

<form action="{{ url_for('recompute') }}" method="get">
    <span>NAME:</span><input type="text" name="hostname" value=""><br/>
    <span>GitHub URL:</span><input type="text" name="github_url" value="" size="50"><br />
    <span>BASE VM:</span>
        <select name="base_vm">
            {% for box in base_vagrantboxes %}
                <option value="{{ box }}">{{ box }}</option>
            {% endfor %}
        </select><br/>
    <input type="submit" value="Create">
</form>

<h3>Virtual Machines</h3>
<form action="" method="get">
    NAME: <input type="text" name="hostname" value="">
    <input type="submit" value="Search">
</form>

<ul id="vms">
    {% for vm in vms %}
        <li>
            <span class="hostname">{{ vm.hostname }}</span>
            <span class="id">ID</span>
            <span class="latest">TAG</span>
            <span class="version">VERSION</span>
            <span class="date">DATE</span>
            <button type="button" id="btn_history_{{ vm.hostname }}" class="history" onclick="history('{{ vm.hostname }}');">History</button>
            <button type="button" class="play" onclick="play('{{ vm.hostname }}');">Play</button>
            <button type="button" class="download" onclick="download('{{ vm.hostname }}');">Download</button>

            <div id="history_view_{{ vm.hostname }}" class="history_view" style="display: none;">
                <ul>
                    <li>
                        <span class="id">ID</span>
                        <span class="latest">TAG</span>
                        <span class="version">VERSION</span>
                        <span class="date">DATE</span>
                    </li>
                </ul>
            </div>

            <div id="terminal_{{ vm.hostname }}" class="terminal" style="display: none;">
                <p>TERMINAL</p>
            </div>

        </li>
    {% endfor %}
</ul>

<script>
    function history(vm_hostname) {
        view = $("#history_view_"+vm_hostname);
        if (view.css("display") == "none") {
            view.css("display", "inline");
        } else {
            view.css("display", "none");
        }
    }

    function play(vm_hostname) {
        view = $("#terminal_"+vm_hostname);
        if (view.css("display") == "none") {
            view.css("display", "inline");
        } else {
            view.css("display", "none");
        }
    }

    function download(vm_hostname) {
        window.location.href = "{{ url_for('download', hostname='') }}" + vm_hostname
    }
</script>

</body>
</html>